# üó≥Ô∏è CD Voting 0 | School Election System ‚Äî Next.js Web Application

# üìå ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå](#-1-‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)
2. [‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ](#-2-‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)
3. [‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Architecture)](#-3-‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö-system-architecture)
4. [‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#-4-‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
5. [‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö](#-5-‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö)
6. [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database Schema)](#-6-‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•-database-schema)
7. [API Design](#-7-api-design)
8. [‡∏£‡∏∞‡∏ö‡∏ö OCR ‡∏ñ‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Prototype)](#-8-‡∏£‡∏∞‡∏ö‡∏ö-ocr-‡∏ñ‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô-prototype)
9. [‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå](#-9-‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå)
10. [Security Design](#-10-security-design)
11. [UI/UX Guideline](#-11-uiux-guideline)
12. [Project Structure](#-12-project-structure)
13. [TODO List ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠](#-13-todo-list-‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠)

---

# üéØ 1. ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÑ‡∏õ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå

## ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

- **Next.js 16.1 + React 19.2** - ‡πÉ‡∏ä‡πâ App Router ‡πÅ‡∏•‡∏∞ Server Components ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- **Multi-Position Elections** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô, ‡πÄ‡∏•‡∏Ç‡∏≤, ‡πÄ‡∏´‡∏£‡∏±‡∏ç‡∏ç‡∏¥‡∏Å ‡∏Ø‡∏•‡∏Ø)
- **Anonymous Voting** - ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
- **Real-time Results** - ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á
- **Role-based Access** - ‡πÅ‡∏ö‡πà‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Student) ‡πÅ‡∏•‡∏∞ ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (Admin)
- **Teacher Approval System** - ‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï

## ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Current Status)

‚úÖ **‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô**:

- ‡∏£‡∏∞‡∏ö‡∏ö Authentication ‡πÅ‡∏ö‡∏ö Manual (Student ID + National ID)
- Admin Dashboard ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏ö‡∏ö Multi-Position ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥
- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï‡πÇ‡∏î‡∏¢‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô

üöß **‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Deploy**:

- ‡∏£‡∏∞‡∏ö‡∏ö OCR ‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô Prototype)
- ‡∏Å‡∏≤‡∏£ Deploy ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

---

# üß± 2. ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

## Frontend

- **Framework:** Next.js 16.1 with App Router
- **UI Library:** React 19.2
- **Styling:** Tailwind CSS 4 (Custom animations, glassmorphism design)
- **State Management:** React Hooks + Context API
- **UI Components:**
  - TanStack React Table (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
  - Recharts (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥)
  - Material Symbols Outlined (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô)
- **Type Safety:** TypeScript (Strict Mode)

## Backend

- **Database:** MySQL 8.0+ (‡∏ú‡πà‡∏≤‡∏ô XAMPP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development)
- **Database Driver:** mysql2/promise (Connection Pooling)
- **Authentication:** Server-side Sessions (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô MySQL)
- **API Layer:** Next.js Server Actions + API Routes

## OCR Engine (Prototype)

- **Image Processing:** OpenCV.js (Canny Edge Detection, Hough Transform)
- **Text Recognition:** Tesseract.js (Thai Language Support)
- **Status:** ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÅ‡∏•‡∏∞ Debug (‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô [app/debug](app/debug))

## Development Tools

- **Package Manager:** npm
- **Linting:** ESLint + TypeScript ESLint
- **Development Server:** XAMPP (Apache + MySQL)
- **Version Control:** Git

---

# üèóÔ∏è 3. ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Architecture)

## 3.1 Architecture Diagram

```mermaid
flowchart TB
    subgraph CLIENT["üñ•Ô∏è Client Side"]
        STUDENT["üë®‚Äçüéì Student Browser"]
        ADMIN["üë®‚Äçüíº Admin Browser"]
    end

    subgraph SCHOOL_SERVER["üè´ School Web Server (Linux/Windows)"]
        APACHE["üåê Apache (Reverse Proxy)"]

        subgraph NEXTJS["‚ö° Next.js Server (Port 3000)"]
            subgraph PAGES["Pages (Frontend)"]
                AUTH["(auth)/login, register"]
                STU_PAGES["(student)/dashboard, vote"]
                ADM_PAGES["admin/elections, results"]
            end

            subgraph API["API Routes (Backend)"]
                API_AUTH["/api/auth/*"]
                API_DATA["/api/students, elections, votes"]
            end
        end
    end

    subgraph SCHOOL_NET["üè´ School Network"]
        subgraph DB["MySQL Server"]
            TBL_STU[("students")]
            TBL_ELEC[("elections")]
            TBL_CAND[("candidates")]
            TBL_VOTE[("votes")]
        end
    end

    STUDENT --> APACHE
    ADMIN --> APACHE
    APACHE --"http://localhost:3000"--> AUTH & STU_PAGES & ADM_PAGES

    PAGES --> API
    API --> DB
```

## 3.2 Deployment Architecture

### Development Environment (XAMPP)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Browser       ‚îÇ
‚îÇ   localhost     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Next.js Dev    ‚îÇ
‚îÇ  Port 3000      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MySQL (XAMPP)  ‚îÇ
‚îÇ  Port 3306      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Production Environment (School Server)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Browser       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Apache         ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Next.js        ‚îÇ
‚îÇ   (Client)      ‚îÇ     ‚îÇ  (Rev. Proxy)   ‚îÇ     ‚îÇ  (Port 3000)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                         ‚îÇ
                                                         ‚ñº
                                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                ‚îÇ  MySQL Server   ‚îÇ
                                                ‚îÇ  (Port 3306)    ‚îÇ
                                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Apache Reverse Proxy Configuration:**

- ‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ä‡πâ Apache ‡πÄ‡∏õ‡πá‡∏ô Main Web Server
- Next.js ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô Port 3000
- Apache ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà Reverse Proxy ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Next.js
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ Subdomain ‡πÄ‡∏ä‡πà‡∏ô `vote.school.ac.th` ‚Üí `localhost:3000`

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Apache Config:**

```apache
<VirtualHost *:80>
    ServerName vote.school.ac.th

    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    ErrorLog ${APACHE_LOG_DIR}/vote-error.log
    CustomLog ${APACHE_LOG_DIR}/vote-access.log combined
</VirtualHost>
```

## 3.3 Data Flow

### ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï (Voting Flow)

```mermaid
sequenceDiagram
    participant S as Student
    participant UI as UI Component
    participant API as Server Action
    participant DB as MySQL

    S->>UI: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
    UI->>API: castVoteAction(electionId, votes)
    API->>DB: BEGIN TRANSACTION
    API->>DB: CHECK vote_history (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥)
    API->>DB: INSERT vote_history (student_id, election_id)
    API->>DB: INSERT votes (anonymous ballots)
    API->>DB: COMMIT
    DB-->>API: Success
    API-->>UI: { success: true }
    UI-->>S: ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì
```

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Authentication Flow)

```mermaid
sequenceDiagram
    participant S as Student
    participant UI as Login Page
    participant API as loginAction
    participant DB as MySQL

    S->>UI: ‡∏Å‡∏£‡∏≠‡∏Å Student ID + National ID
    UI->>API: loginAction(studentId, nationalId)
    API->>DB: SELECT * FROM students WHERE id = ? AND national_id = ?

    alt ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        DB-->>API: Student Data
        API->>DB: CREATE SESSION (expires in 24h)
        DB-->>API: Session ID
        API->>API: Set Cookie (httpOnly, secure)
        API-->>UI: { success: true, student }
        UI->>S: Redirect to /dashboard
    else ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        DB-->>API: NULL
        API-->>UI: { success: false, error: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" }
        UI->>S: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Error
    end
```

---

# üë• 4. ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

## üë®‚Äçüéì Student (‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)

### ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö

- ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢ **‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô** ‡πÅ‡∏•‡∏∞ **‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô** (Manual Input)
- ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô
- Login ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Student ID + National ID

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
- ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏•‡∏∞ 1 ‡∏Ñ‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á)
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥ (1 ‡∏Ñ‡∏ô ‡πÇ‡∏´‡∏ß‡∏ï 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠ 1 ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á)
- ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Ñ‡∏£)
- ‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß)

### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

- **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô** ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ
- ‡πÇ‡∏´‡∏ß‡∏ï‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á **1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á** ‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥)
- **‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏´‡∏ß‡∏ï‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£** (Anonymous Voting)

---

## üßë‚Äçüè´ Admin (‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π/‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö)

### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á

- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà (‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏ä‡∏∑‡πà‡∏≠, ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
- ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (PENDING ‚Üí OPEN ‚Üí CLOSED)
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô, ‡πÄ‡∏•‡∏Ç‡∏≤, ‡πÄ‡∏´‡∏£‡∏±‡∏ç‡∏ç‡∏¥‡∏Å ‡∏Ø‡∏•‡∏Ø)
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡∏ä‡∏∑‡πà‡∏≠, ‡∏Ñ‡∏≥‡∏Ç‡∏ß‡∏±‡∏ç, ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç)

### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
- **‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï** ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠, ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß/‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏ß‡∏ï)

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

- ‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö **Real-time** (‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÇ‡∏´‡∏ß‡∏ï)
- ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Voter Turnout)
- ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (Bar Chart)
- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö (TanStack Table)
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (CSV, Excel) - _Coming Soon_

### Activity Log

- ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (System Health Check)
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

---

# ‚≠ê 5. ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

## 1) ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Registration & Approval System)

### ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô (Student Registration)

‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö:

1. ‡∏Å‡∏£‡∏≠‡∏Å **‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô** (Student ID) ‡πÄ‡∏ä‡πà‡∏ô "6312"
2. ‡∏Å‡∏£‡∏≠‡∏Å **‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô** (National ID) 13 ‡∏´‡∏•‡∏±‡∏Å
3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
4. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (‡∏ä‡∏∑‡πà‡∏≠, ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•, ‡∏´‡πâ‡∏≠‡∏á, ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà)
5. ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô

### ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Teacher Approval)

‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ú‡πà‡∏≤‡∏ô Admin Dashboard:

- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏£‡∏¥‡∏á
- ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤ **‡πÉ‡∏Ñ‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏£**
- ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∂‡∏á‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏ß‡∏ï‡πÑ‡∏î‡πâ

> üí° **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏£‡∏∞‡∏ö‡∏ö OCR ‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô Prototype (‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô [‡∏Ç‡πâ‡∏≠ 8](#-8-‡∏£‡∏∞‡∏ö‡∏ö-ocr-‡∏ñ‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô-prototype))

---

## 2) ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (Multi-Position Elections)

### ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô

- **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß** - ‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô, ‡∏£‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô, ‡πÄ‡∏•‡∏Ç‡∏≤, ‡πÄ‡∏´‡∏£‡∏±‡∏ç‡∏ç‡∏¥‡∏Å, ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå
- **‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å** (Default Positions):
  - üéñÔ∏è ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô (President)
  - üèÖ ‡∏£‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô (Vice President)
  - üìù ‡πÄ‡∏•‡∏Ç‡∏≤‡∏ô‡∏∏‡∏Å‡∏≤‡∏£ (Secretary)
  - üí∞ ‡πÄ‡∏´‡∏£‡∏±‡∏ç‡∏ç‡∏¥‡∏Å (Treasurer)
  - üì¢ ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå (Public Relations)
  - üé≠ ‡∏ô‡∏±‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ (Entertainment)
- **Custom Positions** - Admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏á
- **‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á (No Vote)** - ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á" ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

### ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï

1. ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Login ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï
3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤:
   - ‚úÖ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß
   - ‚úÖ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏´‡∏ß‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ
   - ‚úÖ ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏ß‡∏ï
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á")
5. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
6. **‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ Transaction** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

---

## 3) ‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (Anonymous Voting System)

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö:

#### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `vote_history` (‡πÉ‡∏Ñ‡∏£‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå)

- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å **student_id** + **election_id**
- ‡πÉ‡∏ä‡πâ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á"

#### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `votes` (‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô - ‡πÑ‡∏°‡πà‡∏°‡∏µ student_id)

- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞ **candidate_id** + **position_id**
- **‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å student_id** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏£‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô"

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Transaction Query

```sql
BEGIN TRANSACTION;

-- 1. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤ ‡∏ô‡∏£. ‡∏£‡∏´‡∏±‡∏™ 6312 ‡∏°‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á ID 1 ‡πÅ‡∏•‡πâ‡∏ß
INSERT INTO vote_history (student_id, election_id) VALUES ('6312', 1);

-- 2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï (‡πÑ‡∏°‡πà‡∏°‡∏µ student_id)
INSERT INTO votes (election_id, position_id, candidate_id)
VALUES
  (1, 'president', 3),      -- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏ö‡∏≠‡∏£‡πå 3 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô
  (1, 'secretary', 5),      -- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏ö‡∏≠‡∏£‡πå 5 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏•‡∏Ç‡∏≤
  (1, 'treasurer', NULL);   -- ‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏´‡∏£‡∏±‡∏ç‡∏ç‡∏¥‡∏Å

COMMIT;
```

---

## 4) ‡∏£‡∏∞‡∏ö‡∏ö Admin Dashboard ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå

### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á

- **CRUD Elections** - ‡∏™‡∏£‡πâ‡∏≤‡∏á ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
- **‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤** - ‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô/‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î
- **‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á** - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PENDING ‚Üí OPEN ‚Üí CLOSED
- **‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£** - ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
- **‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Drag & Drop

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏ú‡∏•‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå

- **‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ** ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÇ‡∏´‡∏ß‡∏ï (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Refresh)
- **Voter Turnout** - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå vs ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á (Bar Chart)** - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á (Table)** - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
- **‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•**:
  - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏¥‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞
  - ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á

### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ ‡∏ä‡∏∑‡πà‡∏≠/‡∏´‡πâ‡∏≠‡∏á/‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- **‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï** ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏Ñ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï (‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß/‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏ß‡∏ï)

### Activity Log

- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Vote Cast, Election Change, Admin Actions)
- ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏•‡∏ô‡πå‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå

---

# üóÑÔ∏è 6. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database Schema)

‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ **MySQL 8.0+** ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

## ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å (Core Tables)

### 1. `students` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

| Column               | Type                      | Description                         |
| -------------------- | ------------------------- | ----------------------------------- |
| `id`                 | VARCHAR(10) PRIMARY KEY   | ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (e.g., "6312")         |
| `national_id`        | VARCHAR(13) NOT NULL      | ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô              |
| `prefix`             | VARCHAR(20)               | ‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠ (‡∏ô‡∏≤‡∏¢, ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß, ‡πÄ‡∏î‡πá‡∏Å‡∏ä‡∏≤‡∏¢) |
| `name`               | VARCHAR(100) NOT NULL     | ‡∏ä‡∏∑‡πà‡∏≠                                |
| `surname`            | VARCHAR(100) NOT NULL     | ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•                             |
| `student_no`         | INT                       | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á                        |
| `class_room`         | VARCHAR(20) NOT NULL      | ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (e.g., "3/1")             |
| `role`               | ENUM('STUDENT', 'ADMIN')  | ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó                               |
| `voting_approved`    | BOOLEAN DEFAULT FALSE     | ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà      |
| `voting_approved_at` | DATETIME                  | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥                       |
| `voting_approved_by` | VARCHAR(100)              | ‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥                          |
| `last_active`        | DATETIME                  | ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î                        |
| `created_at`         | TIMESTAMP DEFAULT CURRENT | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ                    |
| `updated_at`         | TIMESTAMP ON UPDATE       | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î                   |

**Indexes:**

- `idx_national_id` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Login
- `idx_class_room` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏´‡πâ‡∏≠‡∏á

---

### 2. `elections` - ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á

| Column        | Type                                  | Description                  |
| ------------- | ------------------------------------- | ---------------------------- |
| `id`          | INT AUTO_INCREMENT PRIMARY KEY        | ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á             |
| `title`       | VARCHAR(255) NOT NULL                 | ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á           |
| `description` | TEXT                                  | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î                   |
| `type`        | VARCHAR(50)                           | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (e.g., council, club) |
| `start_date`  | DATETIME NOT NULL                     | ‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô                  |
| `end_date`    | DATETIME NOT NULL                     | ‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î                   |
| `status`      | ENUM('PENDING', 'OPEN', 'CLOSED')     | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞                        |
| `is_active`   | BOOLEAN DEFAULT TRUE                  | ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà            |
| `total_votes` | INT DEFAULT 0                         | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î   |
| `created_at`  | TIMESTAMP DEFAULT CURRENT_TIMESTAMP   | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á                  |
| `updated_at`  | TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç                  |

---

### 3. `positions` - ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á

| Column        | Type                    | Description                     |
| ------------- | ----------------------- | ------------------------------- |
| `id`          | VARCHAR(50) PRIMARY KEY | ‡∏£‡∏´‡∏±‡∏™‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (e.g., "president") |
| `election_id` | INT NOT NULL (FK)       | ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô           |
| `title`       | VARCHAR(100) NOT NULL   | ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (e.g., "‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô")    |
| `icon`        | VARCHAR(50)             | ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (Material Symbol)         |
| `enabled`     | BOOLEAN DEFAULT TRUE    | ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà               |
| `is_custom`   | BOOLEAN DEFAULT FALSE   | ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà   |
| `sort_order`  | INT DEFAULT 0           | ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•                  |

**Foreign Keys:**

- `election_id` ‚Üí `elections(id)` ON DELETE CASCADE

---

### 4. `candidates` - ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£

| Column        | Type                                | Description             |
| ------------- | ----------------------------------- | ----------------------- |
| `id`          | INT AUTO_INCREMENT PRIMARY KEY      | ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£            |
| `election_id` | INT NOT NULL (FK)                   | ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô   |
| `position_id` | VARCHAR(50) NOT NULL (FK)           | ‡∏•‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô       |
| `rank`        | INT NOT NULL                        | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (‡πÄ‡∏ö‡∏≠‡∏£‡πå) |
| `name`        | VARCHAR(255) NOT NULL               | ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£            |
| `slogan`      | VARCHAR(255)                        | ‡∏Ñ‡∏≥‡∏Ç‡∏ß‡∏±‡∏ç                  |
| `image_url`   | VARCHAR(500)                        | URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û              |
| `created_at`  | TIMESTAMP DEFAULT CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£     |

**Foreign Keys:**

- `election_id` ‚Üí `elections(id)` ON DELETE CASCADE
- `position_id` ‚Üí `positions(id)` ON DELETE CASCADE

**Indexes:**

- `idx_election_position` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Query ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á

---

### 5. `vote_history` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå

> ‚ö†Ô∏è **‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤ "‡πÉ‡∏Ñ‡∏£‡∏°‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß" ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Ñ‡∏£"**

| Column        | Type                                | Description              |
| ------------- | ----------------------------------- | ------------------------ |
| `id`          | INT AUTO_INCREMENT PRIMARY KEY      | ‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å               |
| `student_id`  | VARCHAR(10) NOT NULL (FK)           | ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå |
| `election_id` | INT NOT NULL (FK)                   | ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô          |
| `voted_at`    | TIMESTAMP DEFAULT CURRENT_TIMESTAMP | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏ß‡∏ï              |
| `ip_address`  | VARCHAR(45)                         | IP Address (Optional)    |
| `user_agent`  | TEXT                                | Browser Info (Optional)  |

**Foreign Keys:**

- `student_id` ‚Üí `students(id)`
- `election_id` ‚Üí `elections(id)`

**Constraints:**

- `UNIQUE KEY unique_voter (student_id, election_id)` - **‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥**

---

### 6. `votes` - ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï (Anonymous)

> ‚ö†Ô∏è **‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞ "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" ‡πÑ‡∏°‡πà‡∏°‡∏µ student_id ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö**

| Column         | Type                                | Description                             |
| -------------- | ----------------------------------- | --------------------------------------- |
| `id`           | BIGINT AUTO_INCREMENT PRIMARY KEY   | ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô                               |
| `election_id`  | INT NOT NULL (FK)                   | ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô                         |
| `position_id`  | VARCHAR(50) NOT NULL (FK)           | ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô                              |
| `candidate_id` | INT (FK)                            | ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô (NULL ‡∏ñ‡πâ‡∏≤‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á) |
| `is_no_vote`   | BOOLEAN DEFAULT FALSE               | ‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà                       |
| `created_at`   | TIMESTAMP DEFAULT CURRENT_TIMESTAMP | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô                      |

**Foreign Keys:**

- `election_id` ‚Üí `elections(id)`
- `position_id` ‚Üí `positions(id)`
- `candidate_id` ‚Üí `candidates(id)`

**Indexes:**

- `idx_election_position_candidate` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß

---

### 7. `sessions` - Server-side Authentication

| Column       | Type                                | Description          |
| ------------ | ----------------------------------- | -------------------- |
| `id`         | VARCHAR(255) PRIMARY KEY            | Session Token (UUID) |
| `student_id` | VARCHAR(10) NOT NULL (FK)           | ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô        |
| `expires_at` | DATETIME NOT NULL                   | ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏           |
| `created_at` | TIMESTAMP DEFAULT CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á Session  |

**Foreign Keys:**

- `student_id` ‚Üí `students(id)` ON DELETE CASCADE

**Indexes:**

- `idx_expires_at` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö Session ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

---

### 8. `admins` - ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö

| Column          | Type                                | Description                             |
| --------------- | ----------------------------------- | --------------------------------------- |
| `id`            | INT AUTO_INCREMENT PRIMARY KEY      | ‡∏£‡∏´‡∏±‡∏™ Admin                              |
| `username`      | VARCHAR(50) UNIQUE NOT NULL         | Username                                |
| `password_hash` | VARCHAR(255) NOT NULL               | bcrypt hash                             |
| `display_name`  | VARCHAR(100)                        | ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á                             |
| `access_level`  | TINYINT DEFAULT 1                   | 0=Root, 1=System, 2=Teacher, 3=Observer |
| `created_at`    | TIMESTAMP DEFAULT CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ                        |

---

### 9. `admin_sessions` - Admin Authentication

| Column       | Type                                | Description         |
| ------------ | ----------------------------------- | ------------------- |
| `id`         | VARCHAR(255) PRIMARY KEY            | Session Token       |
| `admin_id`   | INT NOT NULL (FK)                   | Admin ‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô         |
| `expires_at` | DATETIME NOT NULL                   | ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏          |
| `created_at` | TIMESTAMP DEFAULT CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á Session |

**Foreign Keys:**

- `admin_id` ‚Üí `admins(id)` ON DELETE CASCADE

---

### 10. `activities` - Activity Log

| Column        | Type                                                                 | Description                |
| ------------- | -------------------------------------------------------------------- | -------------------------- |
| `id`          | INT AUTO_INCREMENT PRIMARY KEY                                       | ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°                |
| `type`        | ENUM('vote_cast', 'system_check', 'admin_action', 'election_change') | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°              |
| `title`       | VARCHAR(255) NOT NULL                                                | ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°              |
| `description` | TEXT NOT NULL                                                        | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î                 |
| `metadata`    | JSON                                                                 | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Optional) |
| `created_at`  | TIMESTAMP DEFAULT CURRENT_TIMESTAMP                                  | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°         |

**Indexes:**

- `idx_type` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
- `idx_created_at` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤

---

### 11. `public_display_settings` - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞

| Column                    | Type                                  | Description               |
| ------------------------- | ------------------------------------- | ------------------------- |
| `id`                      | INT AUTO_INCREMENT PRIMARY KEY        | ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤            |
| `election_id`             | INT NOT NULL (FK)                     | ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô           |
| `is_published`            | BOOLEAN DEFAULT FALSE                 | ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏ú‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á          |
| `published_at`            | DATETIME                              | ‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà         |
| `global_show_raw_score`   | BOOLEAN DEFAULT TRUE                  | ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏¥‡∏ö‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á    |
| `global_show_winner_only` | BOOLEAN DEFAULT FALSE                 | ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á |
| `created_at`              | TIMESTAMP DEFAULT CURRENT_TIMESTAMP   | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á               |
| `updated_at`              | TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç               |

**Foreign Keys:**

- `election_id` ‚Üí `elections(id)` ON DELETE CASCADE

**Constraints:**

- `UNIQUE KEY unique_election (election_id)`

---

### 12. `position_display_configs` - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á

| Column             | Type                                  | Description     |
| ------------------ | ------------------------------------- | --------------- |
| `id`               | INT AUTO_INCREMENT PRIMARY KEY        | ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤  |
| `election_id`      | INT NOT NULL (FK)                     | ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô |
| `position_id`      | VARCHAR(50) NOT NULL (FK)             | ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô      |
| `show_raw_score`   | BOOLEAN DEFAULT TRUE                  | ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏¥‡∏ö    |
| `show_winner_only` | BOOLEAN DEFAULT FALSE                 | ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ |
| `skip`             | BOOLEAN DEFAULT FALSE                 | ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•   |
| `created_at`       | TIMESTAMP DEFAULT CURRENT_TIMESTAMP   | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á     |
| `updated_at`       | TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç     |

**Foreign Keys:**

- `election_id` ‚Üí `elections(id)` ON DELETE CASCADE
- `position_id` ‚Üí `positions(id)` ON DELETE CASCADE

**Constraints:**

- `UNIQUE KEY unique_election_position (election_id, position_id)`

---

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Query ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### ‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£

```sql
SELECT
  c.name,
  c.rank,
  p.title AS position,
  COUNT(v.id) AS vote_count
FROM candidates c
JOIN positions p ON c.position_id = p.id
LEFT JOIN votes v ON v.candidate_id = c.id
WHERE c.election_id = ?
GROUP BY c.id, p.id
ORDER BY p.sort_order, vote_count DESC;
```

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

```sql
SELECT * FROM vote_history
WHERE student_id = ? AND election_id = ?;
```

### ‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Voter Turnout)

```sql
SELECT
  COUNT(DISTINCT vh.student_id) AS voted_count,
  (SELECT COUNT(*) FROM students WHERE voting_approved = TRUE) AS total_eligible
FROM vote_history vh
WHERE vh.election_id = ?;
```

---

## ‡πÑ‡∏ü‡∏•‡πå Database Schema

üìÑ **Schema ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:** [`schema.sql`](schema.sql)

---

# üåê 7. API Design

‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ **Next.js Server Actions** ‡πÅ‡∏•‡∏∞ **API Routes** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Frontend ‡πÅ‡∏•‡∏∞ Backend

## 7.1 Authentication API

### Server Actions (`lib/actions/auth.ts`)

| Function            | Description                                 | Parameters                              | Returns                                  |
| ------------------- | ------------------------------------------- | --------------------------------------- | ---------------------------------------- |
| `loginAction`       | Login ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Student ID + National ID | `studentId: string, nationalId: string` | `{ success: boolean, student?, error? }` |
| `logoutAction`      | Logout ‡πÅ‡∏•‡∏∞‡∏•‡∏ö Session                        | -                                       | `{ success: boolean }`                   |
| `getCurrentSession` | ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Session ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô                  | -                                       | `Student \| null`                        |
| `lookupStudent`     | ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô) | `studentId: string, nationalId: string` | `{ success: boolean, student?, error? }` |

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Usage:**

```typescript
import { loginAction, getCurrentSession } from "@/lib/actions/auth";

// Login
const result = await loginAction("6312", "1234567890123");
if (result.success) {
  redirect("/dashboard");
}

// Get Current User
const session = await getCurrentSession();
if (!session) {
  redirect("/login");
}
```

---

## 7.2 Student API (Public)

### Elections

| Endpoint/Function    | Method        | Description                | Auth Required |
| -------------------- | ------------- | -------------------------- | ------------- |
| `getActiveElections` | Server Action | ‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà | ‚úÖ Session    |
| `getElectionDetails` | Server Action | ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á  | ‚úÖ Session    |
| `getCandidates`      | Server Action | ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£         | ‚úÖ Session    |

### Voting

| Function          | Description               | Parameters                                 | Returns                        |
| ----------------- | ------------------------- | ------------------------------------------ | ------------------------------ |
| `castVoteAction`  | ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï               | `electionId: number, votes: VotePayload[]` | `{ success: boolean, error? }` |
| `checkVoteStatus` | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á | `studentId: string, electionId: number`    | `{ hasVoted: boolean }`        |
| `getVoteHistory`  | ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á | `studentId: string`                        | `VoteHistory[]`                |

**VotePayload Interface:**

```typescript
interface VotePayload {
  positionId: string; // e.g., "president"
  candidateId: number | null; // null = No Vote (‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á)
  isNoVote: boolean;
}
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Transaction Flow:**

```typescript
await castVoteAction(1, [
  { positionId: "president", candidateId: 3, isNoVote: false },
  { positionId: "secretary", candidateId: 5, isNoVote: false },
  { positionId: "treasurer", candidateId: null, isNoVote: true }, // ‡∏á‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á
]);

// SQL Transaction:
// 1. CHECK: SELECT * FROM vote_history WHERE student_id=? AND election_id=?
// 2. INSERT: INSERT INTO vote_history (student_id, election_id) VALUES (?, ?)
// 3. INSERT: INSERT INTO votes (election_id, position_id, candidate_id, is_no_vote) VALUES ...
// 4. COMMIT
```

---

## 7.3 Admin API

### Elections Management

| Function               | Description                | Parameters                                    | Returns                     |
| ---------------------- | -------------------------- | --------------------------------------------- | --------------------------- |
| `createElection`       | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà      | `ElectionInput`                               | `{ success: boolean, id? }` |
| `updateElection`       | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á          | `electionId: number, data: Partial<Election>` | `{ success: boolean }`      |
| `deleteElection`       | ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á             | `electionId: number`                          | `{ success: boolean }`      |
| `changeElectionStatus` | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (OPEN/CLOSED) | `electionId: number, status: string`          | `{ success: boolean }`      |

### Candidates Management

| Function          | Description         | Parameters                                      | Returns                     |
| ----------------- | ------------------- | ----------------------------------------------- | --------------------------- |
| `addCandidate`    | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£       | `CandidateInput`                                | `{ success: boolean, id? }` |
| `updateCandidate` | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ | `candidateId: number, data: Partial<Candidate>` | `{ success: boolean }`      |
| `deleteCandidate` | ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£          | `candidateId: number`                           | `{ success: boolean }`      |

### Students Management

| Function              | Description               | Parameters                              | Returns                |
| --------------------- | ------------------------- | --------------------------------------- | ---------------------- |
| `getAllStudents`      | ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î | `filters?: StudentFilters`              | `Student[]`            |
| `approveVotingRights` | ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï         | `studentId: string, approvedBy: string` | `{ success: boolean }` |
| `revokeVotingRights`  | ‡πÄ‡∏û‡∏¥‡∏Å‡∏ñ‡∏≠‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï         | `studentId: string`                     | `{ success: boolean }` |

### Results & Analytics

| Function             | Description            | Parameters                  | Returns                            |
| -------------------- | ---------------------- | --------------------------- | ---------------------------------- |
| `getElectionResults` | ‡∏î‡∏∂‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå | `electionId: number`        | `ElectionResults`                  |
| `getVoterTurnout`    | ‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå  | `electionId: number`        | `{ voted: number, total: number }` |
| `getActivityLog`     | ‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°      | `filters?: ActivityFilters` | `Activity[]`                       |

**ElectionResults Interface:**

```typescript
interface ElectionResults {
  electionId: number;
  title: string;
  totalVotes: number;
  positions: {
    positionId: string;
    positionTitle: string;
    candidates: {
      candidateId: number;
      name: string;
      rank: number;
      voteCount: number;
      percentage: number;
    }[];
    noVoteCount: number;
  }[];
}
```

---

## 7.4 API Routes (Planned)

### Future API Endpoints

```
POST   /api/auth/register           # ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
POST   /api/auth/login              # Login
POST   /api/auth/logout             # Logout

GET    /api/elections               # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
GET    /api/elections/:id           # ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
POST   /api/elections               # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (Admin)
PATCH  /api/elections/:id           # ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (Admin)
DELETE /api/elections/:id           # ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á (Admin)

GET    /api/candidates              # ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
POST   /api/candidates              # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (Admin)
PATCH  /api/candidates/:id          # ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (Admin)
DELETE /api/candidates/:id          # ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (Admin)

POST   /api/vote                    # ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï
GET    /api/vote/status             # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï

GET    /api/results/:electionId     # ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
GET    /api/results/:electionId/turnout  # Voter Turnout

GET    /api/admin/students          # ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Admin)
POST   /api/admin/students/:id/approve  # ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Admin)

GET    /api/admin/activities        # Activity Log (Admin)
```

---

## 7.5 Error Handling

### Error Response Format

```typescript
interface APIError {
  success: false;
  error: {
    code: string;
    message: string;
    details?: any;
  };
}
```

### Common Error Codes

| Code                  | HTTP Status | Description                        |
| --------------------- | ----------- | ---------------------------------- |
| `UNAUTHORIZED`        | 401         | ‡πÑ‡∏°‡πà‡∏°‡∏µ Session ‡∏´‡∏£‡∏∑‡∏≠ Session ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ |
| `FORBIDDEN`           | 403         | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á                 |
| `NOT_FOUND`           | 404         | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•                        |
| `ALREADY_VOTED`       | 409         | ‡πÇ‡∏´‡∏ß‡∏ï‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥)        |
| `VOTING_NOT_APPROVED` | 403         | ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï      |
| `ELECTION_CLOSED`     | 400         | ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß                |
| `DUPLICATE_ENTRY`     | 409         | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥                          |
| `VALIDATION_ERROR`    | 400         | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á                   |
| `DATABASE_ERROR`      | 500         | ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•          |

---

## 7.6 Authentication Flow

### Session Cookie

- **Cookie Name:** `cd_voting_session`
- **Expires:** 24 hours
- **Flags:** `httpOnly`, `secure` (Production), `sameSite: lax`
- **Storage:** MySQL `sessions` table

### Middleware Protection

```typescript
// middleware.ts
export async function middleware(request: NextRequest) {
  const sessionId = request.cookies.get("cd_voting_session")?.value;

  if (!sessionId) {
    return NextResponse.redirect(new URL("/login", request.url));
  }

  const session = await validateSession(sessionId);
  if (!session) {
    return NextResponse.redirect(new URL("/login", request.url));
  }

  return NextResponse.next();
}

export const config = {
  matcher: ["/dashboard/:path*", "/elections/:path*", "/admin/:path*"],
};
```

---

## 7.7 Database Connection Layer

### Connection Pool (`lib/db.ts`)

```typescript
import { query, execute, transaction } from "@/lib/db";

// SELECT Queries
const students = await query<StudentRow>(
  "SELECT * FROM students WHERE class_room = ?",
  ["3/1"]
);

// INSERT/UPDATE/DELETE
const result = await execute(
  "INSERT INTO students (id, name) VALUES (?, ?)",
  ["6312", "‡∏™‡∏°‡∏ä‡∏≤‡∏¢"]
);

// Transaction (Atomic Operations)
await transaction(async (conn) => {
  await conn.execute("INSERT INTO vote_history ...", [...]);
  await conn.execute("INSERT INTO votes ...", [...]);
  // Auto commit on success, rollback on error
});
```

---

## üìã Reference Files

- **Server Actions:** [`lib/actions/`](lib/actions/) (auth, admin-auth, elections, students, votes, activities, public-display)
- **Database Layer:** [`lib/db.ts`](lib/db.ts)
- **Types:** [`types.ts`](types.ts)

---

# ü§ñ 8. ‡∏£‡∏∞‡∏ö‡∏ö OCR ‡∏ñ‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Prototype)

> ‚ö†Ô∏è **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô **Prototype ‡πÅ‡∏•‡∏∞ Debug** ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ô‡∏≥‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á
> üî¨ **‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** [`app/debug/`](app/debug/) - Laboratory Pages ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤
> üìñ **‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°:** [`docs/architech/OCR_System_Flow.md`](docs/architech/OCR_System_Flow.md)

## 8.1 ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Overview)

‡∏£‡∏∞‡∏ö‡∏ö OCR (Optical Character Recognition) ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠

### ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

1. **‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô** - ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏° 2-3 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á 10-15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
2. **‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î** - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏≠‡∏á ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î
3. **Autofill ‡∏ü‡∏≠‡∏£‡πå‡∏°** - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ö‡∏±‡∏ï‡∏£ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
4. **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢** - ‡∏≠‡πà‡∏≤‡∏ô‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÑ‡∏î‡πâ

---

## 8.2 ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° (Architecture)

### ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ

- **OpenCV.js** - Image Processing ‡πÅ‡∏•‡∏∞ Card Detection
  - Canny Edge Detection
  - Hough Line Transform
  - Perspective Transformation
- **Tesseract.js** - Text Recognition (OCR Engine)
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (`tha`)
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (`eng`)

### Pipeline Flow

```mermaid
graph LR
    A[‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ö‡∏±‡∏ï‡∏£] --> B[Card Detection]
    B --> C[Perspective Warp]
    C --> D[Image Enhancement]
    D --> E[OCR Processing]
    E --> F[Text Parsing]
    F --> G[Data Validation]
    G --> H[Autofill Form]
```

---

## 8.3 ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Pipeline

### Stage 1: Card Detection (`detector.ts`)

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ç‡∏≠‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏†‡∏≤‡∏û

**‡∏≠‡∏±‡∏•‡∏Å‡∏≠‡∏£‡∏¥‡∏ó‡∏∂‡∏°:**

1. **Rescale** - ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏†‡∏≤‡∏û‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 500px height (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß)
2. **Grayscale** - ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏Ç‡∏≤‡∏ß-‡∏î‡∏≥
3. **Dual-Path Edge Detection:**
   - **Vertical Path:** Gaussian Blur (light) ‚Üí Canny Edge Detection
   - **Horizontal Path:** Gaussian Blur ‚Üí Morphological Close ‚Üí Canny Edge Detection
4. **Hough Line Transform** - ‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏û (‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô, ‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á)
5. **Line Merging** - ‡∏£‡∏ß‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏±‡∏ô
6. **Intersection Finding** - ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô
7. **Quadrilateral Building** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î
8. **Best Contour Selection** - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ Aspect Ratio ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ö‡∏±‡∏ï‡∏£ (1.6) ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î

**Output:** 4 ‡∏à‡∏∏‡∏î‡∏°‡∏∏‡∏°‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£ (Top-Left, Top-Right, Bottom-Right, Bottom-Left)

---

### Stage 2: Perspective Warp (`pipeline.ts`)

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÅ‡∏õ‡∏•‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏µ‡∏¢‡∏ö

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£:**

```typescript
// ‡πÉ‡∏ä‡πâ OpenCV.js Perspective Transform
const srcPoints = [topLeft, topRight, bottomRight, bottomLeft];
const dstPoints = [
  [0, 0],
  [600, 0],
  [600, 375],
  [0, 375],
];
const M = cv.getPerspectiveTransform(srcPoints, dstPoints);
cv.warpPerspective(src, dst, M, outputSize);
```

**Output:** ‡∏†‡∏≤‡∏û‡∏ö‡∏±‡∏ï‡∏£‡∏Ç‡∏ô‡∏≤‡∏î 600√ó375 px (Aspect Ratio = 1.6)

---

### Stage 3: Image Enhancement (`pipeline.ts`)

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ OCR ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **Sharpening** - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°‡∏ä‡∏±‡∏î‡∏î‡πâ‡∏ß‡∏¢ Unsharp Mask
2. **Contrast Enhancement** - ‡πÄ‡∏û‡∏¥‡πà‡∏° Contrast (1.6x) ‡πÅ‡∏•‡∏∞ Brightness (+5)
3. **Adaptive Thresholding** - ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏û Binary (‡∏Ç‡∏≤‡∏ß-‡∏î‡∏≥) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OCR

**Parameters:**

```typescript
const ENHANCEMENT = {
  CONTRAST: 1.6,
  BRIGHTNESS: 5,
  SHARPEN_INTENSITY: 1.5,
  ADAPTIVE_THRESHOLD_BLOCK_SIZE: 35,
  ADAPTIVE_THRESHOLD_C: 10,
};
```

---

### Stage 4: OCR Processing (Tesseract.js)

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°

```typescript
import Tesseract from "tesseract.js";

const result = await Tesseract.recognize(image, "tha+eng", {
  tessedit_char_whitelist:
    "0123456789‡∏Å‡∏Ç‡∏Ñ‡∏Ü‡∏á‡∏à‡∏â‡∏ä‡∏ã‡∏å‡∏ç‡∏é‡∏è‡∏ê‡∏ë‡∏í‡∏ì‡∏î‡∏ï‡∏ñ‡∏ó‡∏ò‡∏ô‡∏ö‡∏õ‡∏ú‡∏ù‡∏û‡∏ü‡∏†‡∏°‡∏¢‡∏£‡∏•‡∏ß‡∏®‡∏©‡∏™‡∏´‡∏¨‡∏≠‡∏Æ‡∏∞‡∏≤‡∏¥‡∏µ‡∏∂‡∏∑‡∏∏‡∏π‡πÄ‡πÅ‡πÇ‡πÉ‡πÑ‡πÜ /.",
});

const rawText = result.data.text;
```

**Output:** Raw Text

```
‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: 6312
‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•: ‡∏ô‡∏≤‡∏¢ ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ
‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ‡∏°.3/1
‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: 12
```

---

### Stage 5: Text Parsing (`parser.ts`)

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Raw Text

**Extraction Functions:**

| Function            | Pattern Matching                         | Confidence |
| ------------------- | ---------------------------------------- | ---------- |
| `extractStudentId`  | `‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß[‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô]: XXXX`            | 100%       |
|                     | `Student ID: XXXX`                       | 95%        |
|                     | 4-digit starting with 6/7                | 70%        |
| `extractClassroom`  | `‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: X/Y`                         | 100%       |
|                     | `X/Y` format (e.g., "3/1")               | 80%        |
| `extractName`       | `‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•: [‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤] [‡∏ä‡∏∑‡πà‡∏≠] [‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•]` | 100%       |
|                     | Title + 2 Thai words                     | 85%        |
| `extractStudentNo`  | `‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: XX`                             | 100%       |
|                     | Number 1-50 near other info              | 70%        |
| `extractNationalId` | `‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô: X XXXX XXXXX XX X`      | 100%       |
|                     | 13-digit number                          | 90%        |

**Output:**

```typescript
interface ParseResult {
  id?: string; // "6312"
  name?: string; // "‡∏™‡∏°‡∏ä‡∏≤‡∏¢"
  surname?: string; // "‡πÉ‡∏à‡∏î‡∏µ"
  classroom?: string; // "3/1"
  no?: number; // 12
  nationalId?: string; // "1234567890123"
  confidence: {
    id: number; // 0-100
    name: number; // 0-100
    surname: number; // 0-100
    classroom: number; // 0-100
    no: number; // 0-100
    nationalId: number; // 0-100
  };
}
```

---

### Stage 6: Data Validation

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

```typescript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö data.json ‡∏´‡∏£‡∏∑‡∏≠ MySQL
const student = await query<StudentRow>(
  "SELECT * FROM students WHERE id = ? AND national_id = ?",
  [parsedData.id, parsedData.nationalId],
);

if (student) {
  return { matchType: "exact", student };
} else {
  return { matchType: "none", error: "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö" };
}
```

---

## 8.4 ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

| File                                                         | Purpose                                |
| ------------------------------------------------------------ | -------------------------------------- |
| [`lib/ocr/index.ts`](lib/ocr/index.ts)                       | Entry Point - Re-exports all functions |
| [`lib/ocr/types.ts`](lib/ocr/types.ts)                       | TypeScript Interfaces                  |
| [`lib/ocr/constants.ts`](lib/ocr/constants.ts)               | Configuration Values                   |
| [`lib/ocr/opencv-loader.ts`](lib/ocr/opencv-loader.ts)       | OpenCV.js Dynamic Loading              |
| [`lib/ocr/detector.ts`](lib/ocr/detector.ts)                 | Card Detection Algorithm               |
| [`lib/ocr/pipeline.ts`](lib/ocr/pipeline.ts)                 | Image Processing Pipeline              |
| [`lib/ocr/parser.ts`](lib/ocr/parser.ts)                     | OCR Text Parsing                       |
| [`lib/ocr/debug-visualizer.ts`](lib/ocr/debug-visualizer.ts) | Debug Visualization Tools              |

---

## 8.5 ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

1. **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÑ‡∏°‡πà‡∏™‡∏π‡∏á‡∏û‡∏≠** (~60-70%)
   - ‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏°‡∏≤‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏á‡πÑ‡∏°‡πà‡∏î‡∏µ ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
   - ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏™‡∏∞‡∏Å‡∏î‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡∏ú‡∏¥‡∏î
2. **Performance ‡∏ä‡πâ‡∏≤** (3-5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
   - OpenCV.js ‡πÅ‡∏•‡∏∞ Tesseract.js ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô Client-side
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î WASM Files ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (~10MB)
3. **‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏á‡πÅ‡∏•‡∏∞‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ**
   - ‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏á‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÅ‡∏™‡∏á OCR ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏ô Browser ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö WebAssembly**
- **‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Internet** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î OpenCV.js ‡πÅ‡∏•‡∏∞ Tesseract.js
- **‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏≥‡∏£‡∏∏‡∏î** (‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏á)

---

## 8.6 ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Current Implementation)

‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö OCR ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∂‡∏á‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ **Manual Input** ‡πÅ‡∏ó‡∏ô:

1. ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏£‡∏≠‡∏Å **‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô** (Student ID)
2. ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏£‡∏≠‡∏Å **‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô** (National ID)
3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
4. ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏ä‡∏∑‡πà‡∏≠, ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•, ‡∏´‡πâ‡∏≠‡∏á, ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà)
5. ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô

---

## 8.7 ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

### Phase 1: Improve Accuracy (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥)

- ‡πÉ‡∏ä‡πâ Pre-trained Model ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Thai ID Card Detection
- ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Image Enhancement Algorithm
- ‡πÄ‡∏û‡∏¥‡πà‡∏° Error Correction Logic (Fuzzy Matching)

### Phase 2: Server-side OCR

- ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÑ‡∏õ‡∏ó‡∏≥‡∏ó‡∏µ‡πà Server
- ‡πÉ‡∏ä‡πâ Python + OpenCV + Tesseract (Server version)
- ‡πÄ‡∏û‡∏¥‡πà‡∏° GPU Acceleration (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

### Phase 3: Machine Learning

- ‡∏ù‡∏∂‡∏Å Custom Model ‡∏î‡πâ‡∏ß‡∏¢ Thai Student ID Card Dataset
- ‡πÉ‡∏ä‡πâ YOLO ‡∏´‡∏£‡∏∑‡∏≠ EfficientDet ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Card Detection
- ‡πÉ‡∏ä‡πâ CRNN ‡∏´‡∏£‡∏∑‡∏≠ Transformer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Text Recognition

---

## 8.8 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Developers

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö OCR

‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà Debug Laboratory Pages:

- [`/debug/ocr`](http://localhost:3000/debug/ocr) - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö OCR Pipeline
- [`/debug/hough`](http://localhost:3000/debug/hough) - Debug Hough Line Detection
- [`/debug/camera`](http://localhost:3000/debug/camera) - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Camera Capture

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô OCR Library

```typescript
import { processImage, parseOCRText, validateParsedData } from "@/lib/ocr";

// 1. Process Image
const result = await processImage(imageDataUrl);

if (result.ok) {
  const { thresholdedCard, detectionResult } = result.value;

  // 2. Run OCR
  const ocrResult = await Tesseract.recognize(thresholdedCard, "tha+eng");

  // 3. Parse Text
  const parsed = parseOCRText(ocrResult.data.text);

  // 4. Validate
  const validation = await validateParsedData(parsed);

  console.log(validation); // { matchType: "exact", student: {...} }
}
```

---

## üìñ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- **Architecture Diagram:** [`docs/architech/OCR_System_Flow.md`](docs/architech/OCR_System_Flow.md)
- **OpenCV.js Docs:** https://docs.opencv.org/4.x/d5/d10/tutorial_js_root.html
- **Tesseract.js Docs:** https://tesseract.projectnaptha.com/

---

# üì© 9. ‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå

## 9.1 ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏´‡∏ß‡∏ï (Voting Rights Approval)

### ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô

1. ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏£‡∏≠‡∏Å **‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô** ‡πÅ‡∏•‡∏∞ **‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô**
2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
3. ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•, ‡∏´‡πâ‡∏≠‡∏á, ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà)
4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á `students` ‡πÇ‡∏î‡∏¢ `voting_approved = FALSE`

### ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡∏Ñ‡∏£‡∏π

```sql
-- Admin/‡∏Ñ‡∏£‡∏π‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÇ‡∏´‡∏ß‡∏ï
UPDATE students
SET
  voting_approved = TRUE,
  voting_approved_at = NOW(),
  voting_approved_by = '‡∏Ñ‡∏£‡∏π‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ'
WHERE id = '6312';
```

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏´‡∏ß‡∏ï

```typescript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏ß‡∏ï
const student = await query<StudentRow>("SELECT * FROM students WHERE id = ?", [
  studentId,
]);

if (!student.voting_approved) {
  return {
    success: false,
    error: "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô",
  };
}
```

---

## 9.2 Flow ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï (Voting Flow)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï

```mermaid
sequenceDiagram
    participant Student
    participant UI
    participant ServerAction
    participant MySQL

    Student->>UI: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
    UI->>UI: Validate (‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏£‡∏ö)
    UI->>ServerAction: castVoteAction(electionId, votes)

    ServerAction->>MySQL: BEGIN TRANSACTION

    Note over ServerAction,MySQL: Step 1: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
    ServerAction->>MySQL: SELECT * FROM students WHERE id=?
    MySQL-->>ServerAction: student {voting_approved: true}

    Note over ServerAction,MySQL: Step 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    ServerAction->>MySQL: SELECT * FROM vote_history WHERE student_id=? AND election_id=?
    MySQL-->>ServerAction: NULL (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏ß‡∏ï)

    Note over ServerAction,MySQL: Step 3: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
    ServerAction->>MySQL: INSERT INTO vote_history (student_id, election_id) VALUES (?, ?)

    Note over ServerAction,MySQL: Step 4: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï (Anonymous)
    loop ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
        ServerAction->>MySQL: INSERT INTO votes (election_id, position_id, candidate_id) VALUES (?, ?, ?)
    end

    Note over ServerAction,MySQL: Step 5: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó total_votes
    ServerAction->>MySQL: UPDATE elections SET total_votes = total_votes + 1 WHERE id=?

    ServerAction->>MySQL: COMMIT
    MySQL-->>ServerAction: Success

    ServerAction-->>UI: {success: true}
    UI-->>Student: Redirect to /vote-success
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Code

```typescript
"use server";

export async function castVoteAction(
  electionId: number,
  votes: {
    positionId: string;
    candidateId: number | null;
    isNoVote: boolean;
  }[],
) {
  const session = await getCurrentSession();
  if (!session) {
    return { success: false, error: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏´‡∏ß‡∏ï" };
  }

  return await transaction(async (conn) => {
    // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
    const [student] = await conn.query<StudentRow[]>(
      "SELECT * FROM students WHERE id = ?",
      [session.id],
    );

    if (!student.voting_approved) {
      throw new Error("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π");
    }

    // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    const [existingVote] = await conn.query(
      "SELECT * FROM vote_history WHERE student_id = ? AND election_id = ?",
      [session.id, electionId],
    );

    if (existingVote.length > 0) {
      throw new Error("‡∏Ñ‡∏∏‡∏ì‡πÇ‡∏´‡∏ß‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß");
    }

    // 3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
    await conn.execute(
      "INSERT INTO vote_history (student_id, election_id) VALUES (?, ?)",
      [session.id, electionId],
    );

    // 4. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï (‡πÑ‡∏°‡πà‡∏°‡∏µ student_id)
    for (const vote of votes) {
      await conn.execute(
        "INSERT INTO votes (election_id, position_id, candidate_id, is_no_vote) VALUES (?, ?, ?, ?)",
        [electionId, vote.positionId, vote.candidateId, vote.isNoVote],
      );
    }

    // 5. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó total_votes
    await conn.execute(
      "UPDATE elections SET total_votes = total_votes + 1 WHERE id = ?",
      [electionId],
    );

    return { success: true };
  });
}
```

---

## 9.3 ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥

### Database Constraint

```sql
-- Unique constraint ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö Database
ALTER TABLE vote_history
ADD CONSTRAINT unique_voter UNIQUE (student_id, election_id);
```

### Application Level Check

```typescript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏ß‡∏ï
const hasVoted = await query(
  "SELECT * FROM vote_history WHERE student_id = ? AND election_id = ?",
  [studentId, electionId],
);

if (hasVoted.length > 0) {
  redirect("/already-voted");
}
```

---

## 9.4 ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï (Vote History)

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤:

- ‚úÖ ‡πÇ‡∏´‡∏ß‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡πâ‡∏≤‡∏á
- ‚úÖ ‡πÇ‡∏´‡∏ß‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà (Timestamp)
- ‚ùå **‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Ñ‡∏£** (‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö)

```typescript
export async function getVoteHistory(studentId: string) {
  return await query(
    `SELECT
      vh.voted_at,
      e.title AS election_title,
      e.type
    FROM vote_history vh
    JOIN elections e ON vh.election_id = e.id
    WHERE vh.student_id = ?
    ORDER BY vh.voted_at DESC`,
    [studentId],
  );
}
```

### ‡∏´‡∏ô‡πâ‡∏≤ Vote History UI

```tsx
// app/(student)/me/votes/page.tsx
export default async function VoteHistoryPage() {
  const session = await getCurrentSession();
  const history = await getVoteHistory(session.id);

  return (
    <div>
      {history.map((record) => (
        <div key={record.id} className="glass-card">
          <h3>{record.election_title}</h3>
          <p>‡πÇ‡∏´‡∏ß‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠: {formatDate(record.voted_at)}</p>
          <span className="badge">‚úì ‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß</span>
        </div>
      ))}
    </div>
  );
}
```

---

## 9.5 Token ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Vote Token) - Future Feature

> üìù **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ implement ‡πÅ‡∏ï‡πà‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ

### ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏ß‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á **Vote Token** ‡πÄ‡∏û‡∏∑‡πà‡∏≠:

1. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
2. ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ
3. ‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Implementation

```typescript
// ‡∏™‡∏£‡πâ‡∏≤‡∏á Token ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏ß‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
const token = `VOTE-${generateRandomCode(8)}`; // e.g., "VOTE-9SG2-XQ11"

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database
await execute(
  "INSERT INTO vote_tokens (student_id, election_id, token) VALUES (?, ?, ?)",
  [studentId, electionId, token],
);

// ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
await sendEmail({
  to: student.email,
  subject: "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",
  body: `
    ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á "${election.title}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß

    Token ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: ${token}
    ‡πÄ‡∏ß‡∏•‡∏≤: ${new Date().toLocaleString("th-TH")}

    ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
  `,
});
```

### Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Token (Planned)

```sql
CREATE TABLE vote_tokens (
  id INT AUTO_INCREMENT PRIMARY KEY,
  student_id VARCHAR(10) NOT NULL,
  election_id INT NOT NULL,
  token VARCHAR(20) UNIQUE NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  FOREIGN KEY (student_id) REFERENCES students(id),
  FOREIGN KEY (election_id) REFERENCES elections(id)
);
```

---

# üõ° 10. Security Design

## 10.1 ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥ (Duplicate Voting Prevention)

### Database Level

```sql
-- UNIQUE Constraint ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö Database
ALTER TABLE vote_history
ADD CONSTRAINT unique_voter UNIQUE (student_id, election_id);

-- ‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥ ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î Error: Duplicate entry
```

### Application Level

```typescript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏ß‡∏ï
const existingVote = await query(
  "SELECT * FROM vote_history WHERE student_id = ? AND election_id = ?",
  [studentId, electionId],
);

if (existingVote.length > 0) {
  throw new Error("‡∏Ñ‡∏∏‡∏ì‡πÇ‡∏´‡∏ß‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß");
}
```

### UI Level

```typescript
// ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏´‡∏ß‡∏ï‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß
const hasVoted = await checkVoteStatus(studentId, electionId);

return hasVoted ? (
  <div className="badge-success">‚úì ‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß</div>
) : (
  <button onClick={handleVote}>‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
);
```

---

## 10.2 Anonymous Voting (‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô)

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£

- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á `vote_history`** - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å **student_id** (‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏°‡∏≤‡πÇ‡∏´‡∏ß‡∏ï)
- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á `votes`** - **‡πÑ‡∏°‡πà‡∏°‡∏µ student_id** (‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Ñ‡∏£)

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

```sql
-- ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ JOIN ‡πÑ‡∏î‡πâ
SELECT v.candidate_id, vh.student_id
FROM votes v
JOIN vote_history vh ON v.election_id = vh.election_id;
-- ‚ùå Query ‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ student_id ‡πÑ‡∏´‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å candidate_id ‡πÑ‡∏´‡∏ô
-- ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ unique identifier ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡∏Å votes ‡∏Å‡∏±‡∏ö vote_history
```

### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

- **Admin ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏π‡πâ‡πÑ‡∏î‡πâ** ‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏ô‡πÑ‡∏´‡∏ô
- **‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô** ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ (Immutable)

---

## 10.3 Session-based Authentication

### Cookie Configuration

```typescript
const sessionCookie = {
  name: "cd_voting_session",
  value: sessionId,
  httpOnly: true, // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô JavaScript ‡∏î‡∏∂‡∏á Cookie (XSS Protection)
  secure: process.env.NODE_ENV === "production", // HTTPS only in production
  sameSite: "lax", // CSRF Protection
  maxAge: 60 * 60 * 24, // 24 hours
  path: "/",
};
```

### Session Validation

```typescript
export async function getCurrentSession() {
  const cookieStore = await cookies();
  const sessionId = cookieStore.get("cd_voting_session")?.value;

  if (!sessionId) return null;

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Session ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
  const [session] = await query<SessionRow[]>(
    "SELECT * FROM sessions WHERE id = ? AND expires_at > NOW()",
    [sessionId],
  );

  if (!session) return null;

  // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Student
  const [student] = await query<StudentRow[]>(
    "SELECT * FROM students WHERE id = ?",
    [session.student_id],
  );

  return student || null;
}
```

### Auto Cleanup Expired Sessions

```sql
-- ‡∏•‡∏ö Session ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏ó‡∏∏‡∏Å 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (Cron Job)
DELETE FROM sessions WHERE expires_at < NOW();
```

---

## 10.4 Authorization (Role-based Access Control)

### Middleware Protection

```typescript
// middleware.ts
export async function middleware(request: NextRequest) {
  const path = request.nextUrl.pathname;

  // Protect Admin Routes
  if (path.startsWith("/admin")) {
    const session = await getCurrentSession();

    if (!session || session.role !== "ADMIN") {
      return NextResponse.redirect(new URL("/login", request.url));
    }
  }

  // Protect Student Routes
  if (path.startsWith("/dashboard") || path.startsWith("/elections")) {
    const session = await getCurrentSession();

    if (!session) {
      return NextResponse.redirect(new URL("/login", request.url));
    }
  }

  return NextResponse.next();
}

export const config = {
  matcher: ["/dashboard/:path*", "/elections/:path*", "/admin/:path*"],
};
```

---

## 10.5 SQL Injection Prevention

### ‡πÉ‡∏ä‡πâ Prepared Statements

```typescript
// ‚úÖ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢: ‡πÉ‡∏ä‡πâ Parameterized Query
await query("SELECT * FROM students WHERE id = ? AND national_id = ?", [
  studentId,
  nationalId,
]);

// ‚ùå ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢: String Concatenation
await query(
  `SELECT * FROM students WHERE id = '${studentId}' AND national_id = '${nationalId}'`,
);
```

### Input Validation

```typescript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Format ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡πÑ‡∏õ Database
function validateStudentId(id: string): boolean {
  return /^\d{4}$/.test(id); // 4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
}

function validateNationalId(id: string): boolean {
  return /^\d{13}$/.test(id); // 13 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
}
```

---

## 10.6 XSS Protection (Cross-Site Scripting)

### React ‡πÅ‡∏ó‡∏£‡∏Å HTML ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

```tsx
// ‚úÖ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢: React escape HTML ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
<h1>{election.title}</h1>

// ‚ùå ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢: dangerouslySetInnerHTML
<div dangerouslySetInnerHTML={{ __html: election.description }} />
```

### Sanitize User Input

```typescript
import DOMPurify from "isomorphic-dompurify";

// ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á HTML ‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÉ‡∏´‡πâ Sanitize ‡∏Å‡πà‡∏≠‡∏ô
const cleanHTML = DOMPurify.sanitize(userInput);
```

---

## 10.7 CSRF Protection (Cross-Site Request Forgery)

### SameSite Cookie

```typescript
// Cookie ‡∏ó‡∏µ‡πà‡∏°‡∏µ sameSite: "lax" ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏à‡∏≤‡∏Å External Sites
Set-Cookie: cd_voting_session=...; SameSite=Lax
```

### CSRF Token (Optional - for Forms)

```typescript
// Generate CSRF Token
const csrfToken = crypto.randomBytes(32).toString("hex");

// Validate on Submit
if (req.body.csrfToken !== session.csrfToken) {
  throw new Error("Invalid CSRF Token");
}
```

---

## 10.8 Rate Limiting

### ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Brute Force

```typescript
// ‡πÉ‡∏ä‡πâ Redis ‡∏´‡∏£‡∏∑‡∏≠ In-Memory Store
const loginAttempts = new Map<string, number>();

export async function checkRateLimit(identifier: string): Promise<boolean> {
  const attempts = loginAttempts.get(identifier) || 0;

  if (attempts >= 5) {
    return false; // Block after 5 attempts
  }

  loginAttempts.set(identifier, attempts + 1);

  // Reset after 15 minutes
  setTimeout(() => loginAttempts.delete(identifier), 15 * 60 * 1000);

  return true;
}
```

---

## 10.9 ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß

### ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (National ID)

- **‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô Plain Text** (‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á User)
- **‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô UI** ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (Profile, Admin)
- **‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏ô Client-side JavaScript** ‡πÄ‡∏ß‡πâ‡∏ô‡πÅ‡∏ï‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

### ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```typescript
// ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: Server-side Only
export async function getStudentProfile(studentId: string) {
  "use server";
  return await query("SELECT * FROM students WHERE id = ?", [studentId]);
}

// ‚ùå ‡∏ú‡∏¥‡∏î: ‡∏™‡πà‡∏á National ID ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Client
<div data-national-id={student.national_id}>
```

---

## 10.10 ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OCR

> ‚ö†Ô∏è **‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠ OCR ‡∏ñ‡∏π‡∏Å Deploy**

- **‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ñ‡∏≤‡∏ß‡∏£** - ‡∏•‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á Process ‡πÄ‡∏™‡∏£‡πá‡∏à
- **Process ‡∏ö‡∏ô Server-side** - ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Third-party Service
- **Log ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå** - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Success/Fail ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß

---

## 10.11 Environment Variables

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á `.env.local`

```bash
# Database
DATABASE_HOST=localhost
DATABASE_PORT=3306
DATABASE_USER=root
DATABASE_PASSWORD=your_password_here
DATABASE_NAME=cd_voting

# Session
SESSION_SECRET=random-32-char-string-here

# (Future) Email
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=voting@school.ac.th
SMTP_PASSWORD=app-password-here
```

### ‡∏´‡πâ‡∏≤‡∏° Commit `.env.local`

```gitignore
# .gitignore
.env
.env.local
.env.*.local
```

---

# üé® 11. UI/UX Guideline

## 11.1 Design System

### Color Palette

| Color         | Hex Code  | Usage                       |
| ------------- | --------- | --------------------------- |
| Primary Blue  | `#137fec` | ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å, Links             |
| Royal Blue    | `#1a56db` | Admin Navbar, Hover States  |
| Vivid Yellow  | `#fbbf24` | Highlights, Warnings        |
| Success Green | `#22c55e` | ‡∏ú‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, Checkmarks        |
| Error Red     | `#ef4444` | ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î, Danger Actions  |
| Neutral Gray  | `#6b7280` | ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏≠‡∏á, Disabled States |

### Typography

- **Font:** System Fonts (San Francisco, Segoe UI, Roboto)
- **Thai Font:** Noto Sans Thai, Sarabun
- **Headings:** 700 (Bold)
- **Body:** 400 (Regular)
- **Scale:** 14px (body), 16px (large body), 20px (h3), 24px (h2), 32px (h1)

---

## 11.2 Glassmorphism Design

### Glass Card Components

```css
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}
```

### Usage

```tsx
// Election Card
<div className="glass-card p-6 hover:shadow-lg transition-all">
  <h3>{election.title}</h3>
  <p>{election.description}</p>
</div>
```

---

## 11.3 Animations

### Custom Animations (globals.css)

| Animation       | Duration | Easing      | Usage                           |
| --------------- | -------- | ----------- | ------------------------------- |
| `fadeIn`        | 0.3s     | ease-out    | Page load, Modal open           |
| `slideUp`       | 0.4s     | ease-out    | Cards, List items               |
| `float`         | 3s       | ease-in-out | Hero elements (infinite)        |
| `pulse-glow`    | 2s       | ease-in-out | Active indicators (infinite)    |
| `neon-pulse`    | 1.5s     | ease-in-out | Button hover effects (infinite) |
| `modalBackdrop` | 0.3s     | ease-out    | Modal backdrop fade-in          |
| `modalContent`  | 0.3s     | ease-out    | Modal content scale-in          |

### Best Practices

- ‚úÖ ‡πÉ‡∏ä‡πâ Tailwind utility classes: `animate-fadeIn`, `animate-slideUp`
- ‚úÖ Animate ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ `opacity` ‡πÅ‡∏•‡∏∞ `transform` (GPU-accelerated)
- ‚ùå ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á animating `width`, `height`, `backdrop-filter`
- ‚ùå ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ inline styles ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á

```tsx
// ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
<div className="animate-fadeIn animate-slideUp">Content</div>

// ‚ùå ‡∏ú‡∏¥‡∏î
<div style={{ animation: "fadeIn 0.3s ease-out" }}>Content</div>
```

---

## 11.4 Responsive Design

### Mobile-first Approach

- **Base styles:** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Mobile (< 768px)
- **Breakpoints:**
  - `sm:` 640px (Tablet Portrait)
  - `md:` 768px (Tablet Landscape)
  - `lg:` 1024px (Desktop)
  - `xl:` 1280px (Large Desktop)

### Example

```tsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {/* 1 column on mobile, 2 on tablet, 3 on desktop */}
</div>
```

---

## 11.5 Navigation

### Bottom Navigation (Student)

- **Position:** Fixed bottom
- **Items:** 3-4 items max
- **Icons:** Material Symbols Outlined
- **Active State:** Color + Icon weight change

```tsx
<nav className="fixed bottom-0 w-full glass-navbar">
  <a href="/dashboard" className={active ? "active" : ""}>
    <span className="material-symbols-outlined">home</span>
    <span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
  </a>
</nav>
```

### Top Navigation (Admin)

- **Position:** Fixed top
- **Logo:** Left side
- **Menu:** Right side (Desktop) / Hamburger (Mobile)
- **User Profile:** Avatar + Name

---

## 11.6 Forms & Inputs

### Input Fields

```tsx
<input
  type="text"
  className="
    w-full px-4 py-3 rounded-lg
    bg-white/10 backdrop-blur-sm
    border border-white/20
    focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20
    transition-all
  "
  placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"
/>
```

### Buttons

```tsx
// Primary Button
<button className="
  px-6 py-3 rounded-lg
  bg-blue-600 hover:bg-blue-700
  text-white font-semibold
  transition-all
  hover:shadow-lg hover:scale-105
">
  ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
</button>

// Secondary Button
<button className="
  px-6 py-3 rounded-lg
  bg-white/10 hover:bg-white/20
  border border-white/30
  transition-all
">
  ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
</button>
```

---

## 11.7 Candidate Cards

### Selection Card

```tsx
<div
  className={`
    glass-card cursor-pointer transition-all
    ${selected ? "ring-4 ring-blue-500 scale-105" : "hover:scale-102"}
  `}
  onClick={() => selectCandidate(candidate.id)}
>
  <img src={candidate.imageUrl} className="rounded-lg mb-4" />
  <h3 className="text-xl font-bold">‡πÄ‡∏ö‡∏≠‡∏£‡πå {candidate.rank}</h3>
  <p className="text-lg">{candidate.name}</p>
  <p className="text-sm text-gray-400">{candidate.slogan}</p>

  {selected && (
    <div className="absolute top-4 right-4">
      <span className="text-4xl">‚úì</span>
    </div>
  )}
</div>
```

---

## 11.8 Results Display

### Bar Chart (Recharts)

```tsx
import { BarChart, Bar, XAxis, YAxis, Tooltip } from "recharts";

<BarChart data={results}>
  <XAxis dataKey="name" />
  <YAxis />
  <Tooltip />
  <Bar dataKey="voteCount" fill="#137fec" />
</BarChart>;
```

### Table (TanStack React Table)

```tsx
import { useReactTable, flexRender } from "@tanstack/react-table";

const table = useReactTable({
  data: results,
  columns: [
    { header: "‡πÄ‡∏ö‡∏≠‡∏£‡πå", accessorKey: "rank" },
    { header: "‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£", accessorKey: "name" },
    { header: "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô", accessorKey: "voteCount" },
  ],
});
```

---

## 11.9 Loading States

### Skeleton Loader

```tsx
<div className="animate-pulse space-y-4">
  <div className="h-8 bg-gray-300 rounded w-3/4"></div>
  <div className="h-4 bg-gray-300 rounded w-1/2"></div>
</div>
```

### Spinner

```tsx
<div className="flex items-center justify-center">
  <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
</div>
```

---

## 11.10 Modal & Confirmations

### Confirm Modal

```tsx
<ConfirmModal
  isOpen={showConfirm}
  onConfirm={handleVote}
  onCancel={() => setShowConfirm(false)}
  title="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô"
  message="‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ"
  confirmText="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"
  cancelText="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"
/>
```

### Implementation

- ‡πÉ‡∏ä‡πâ `animate-modalBackdrop` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö backdrop
- ‡πÉ‡∏ä‡πâ `animate-modalContent` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö content
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô scrollbar jump ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì scrollbar width

---

## 11.11 Icons (Material Symbols Outlined)

### Usage

```tsx
<span className="material-symbols-outlined">how_to_vote</span>
<span className="material-symbols-outlined">person</span>
<span className="material-symbols-outlined">bar_chart</span>
```

### Common Icons

- `home` - ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
- `how_to_vote` - ‡πÇ‡∏´‡∏ß‡∏ï
- `person` - ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
- `bar_chart` - ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
- `group` - ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- `event` - ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
- `check_circle` - ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- `cancel` - ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å

---

## üìñ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- **Animation Best Practices:** [`docs/practices/ANIMATION_AND_MODAL_BEST_PRACTICES.md`](docs/practices/ANIMATION_AND_MODAL_BEST_PRACTICES.md)
- **Tailwind CSS Docs:** https://tailwindcss.com
- **Material Symbols:** https://fonts.google.com/icons

---

# üìÅ 12. Project Structure

```
cd-voting-0/
‚îÇ
‚îú‚îÄ‚îÄ app/                                # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/                         # Auth Route Group (‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á Navbar)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/                      # ‡∏´‡∏ô‡πâ‡∏≤ Login
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/                   # ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ (student)/                      # Student Route Group (‡∏°‡∏µ Bottom Nav)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                    # Dashboard ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ elections/                  # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/                   # ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ vote/               # ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ me/                         # ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ votes/                  # ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ results/                    # ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vote-success/               # ‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏ß‡∏ï
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx                  # Layout with Bottom Nav
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ admin/                          # Admin Dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                    # Admin Home
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                  # Layout with Admin Navbar
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ elections/                  # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ edit/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ candidates/         # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ students/                   # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ results/                    # ‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ activities/                 # Activity Log
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ poc/                            # Proof of Concept (MySQL Integration)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ README.md                   # MySQL Migration Guide
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.sql                  # Database Schema
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ actions.ts                  # Server Actions (Login, Vote, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db.ts                   # MySQL Connection Pool
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                    # POC Testing Page
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ debug/                          # Debug & Laboratory Pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ocr/                        # OCR Testing
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hough/                      # Hough Line Debug
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ camera/                     # Camera Testing
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/                            # API Routes (Future)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ globals.css                     # Global Styles (Animations, Glassmorphism)
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                      # Root Layout
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                        # Landing Page
‚îÇ
‚îú‚îÄ‚îÄ components/                         # Reusable Components
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminNavbar.tsx             # Top Navigation for Admin
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ElectionControlButtons.tsx  # OPEN/CLOSE Election Buttons
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ElectionForm.tsx            # Create/Edit Election Form
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CandidateForm.tsx           # Add/Edit Candidate Form
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResultsTable.tsx            # Results Table (TanStack Table)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ student/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BottomNav.tsx               # Bottom Navigation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ElectionCard.tsx            # Election Card Component
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CandidateCard.tsx           # Candidate Selection Card
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConfirmModal.tsx            # Confirmation Modal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoadingSpinner.tsx          # Loading Indicator
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ErrorMessage.tsx            # Error Display
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ ocr/                            # OCR Components (Prototype)
‚îÇ       ‚îú‚îÄ‚îÄ ImageUploader.tsx
‚îÇ       ‚îú‚îÄ‚îÄ CardPreview.tsx
‚îÇ       ‚îî‚îÄ‚îÄ OCRResultDisplay.tsx
‚îÇ
‚îú‚îÄ‚îÄ lib/                                # Utilities & Libraries
‚îÇ   ‚îú‚îÄ‚îÄ ocr/                            # OCR Library (Prototype)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts                    # Entry Point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts                    # TypeScript Interfaces
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts                # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ opencv-loader.ts            # OpenCV.js Loader
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detector.ts                 # Card Detection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pipeline.ts                 # Image Processing Pipeline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser.ts                   # OCR Text Parsing
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ debug-visualizer.ts         # Debug Tools
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ student-data.ts                 # Mock Data Utils (Development)
‚îÇ
‚îú‚îÄ‚îÄ hooks/                              # Custom React Hooks
‚îÇ
‚îú‚îÄ‚îÄ types.ts                            # Global TypeScript Types
‚îÇ
‚îú‚îÄ‚îÄ public/                             # Static Assets
‚îÇ   ‚îú‚îÄ‚îÄ data.json                       # Mock Student Database (Development)
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ opencv.js                   # OpenCV.js WASM
‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ docs/                               # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ architech/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OCR_System_Flow.md          # OCR Architecture Document
‚îÇ   ‚îî‚îÄ‚îÄ practices/
‚îÇ       ‚îî‚îÄ‚îÄ ANIMATION_AND_MODAL_BEST_PRACTICES.md  # UI Best Practices
‚îÇ
‚îú‚îÄ‚îÄ .env.local                          # Environment Variables (NOT committed)
‚îú‚îÄ‚îÄ .env.example                        # Environment Template
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ CLAUDE.md                           # Instructions for Claude Code
‚îú‚îÄ‚îÄ README.md                           # This file
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ pnpm-lock.yaml
‚îú‚îÄ‚îÄ tsconfig.json                       # TypeScript Config (Strict Mode)
‚îú‚îÄ‚îÄ tailwind.config.ts                  # Tailwind CSS 4 Config
‚îú‚îÄ‚îÄ next.config.ts                      # Next.js Config
‚îî‚îÄ‚îÄ middleware.ts                       # Route Protection Middleware
```

## ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Key Files)

### Database & Backend

| File                 | Description                                       |
| -------------------- | ------------------------------------------------- |
| `app/poc/schema.sql` | MySQL Database Schema (12 tables)                 |
| `app/poc/lib/db.ts`  | MySQL Connection Pool & Query Helpers             |
| `app/poc/actions.ts` | Server Actions (Login, Vote, Election Management) |

### Frontend

| File                                 | Description                          |
| ------------------------------------ | ------------------------------------ |
| `components/admin/AdminNavbar.tsx`   | Admin Navigation with Menu & Profile |
| `components/student/BottomNav.tsx`   | Student Bottom Navigation            |
| `components/shared/ConfirmModal.tsx` | Reusable Confirmation Modal          |

### Utilities

| File                  | Description                                          |
| --------------------- | ---------------------------------------------------- |
| `lib/ocr/pipeline.ts` | OCR Image Processing Pipeline (Prototype)            |
| `lib/actions/*.ts`    | Server Actions for all data operations (MySQL)       |
| `lib/db.ts`           | MySQL connection pool with query/execute/transaction |
| `types.ts`            | Global TypeScript Interfaces                         |

### Configuration

| File                 | Description                                |
| -------------------- | ------------------------------------------ |
| `globals.css`        | Custom animations, glassmorphism utilities |
| `tailwind.config.ts` | Tailwind CSS 4 configuration               |
| `CLAUDE.md`          | Project instructions for Claude Code       |

---

# üöÄ 13. TODO List ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠

## ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (Completed)

### Frontend & UI

- [x] **UI/UX Design System** - Glassmorphism, Color Palette, Typography
- [x] **Custom Animations** - fadeIn, slideUp, float, pulse-glow, neon-pulse, modal animations
- [x] **Responsive Design** - Mobile-first, Breakpoints (sm, md, lg, xl)
- [x] **Bottom Navigation** (Student) - 4 items with active states
- [x] **Admin Navbar** - Top navigation with menu, notifications, profile
- [x] **Election Cards** - Display elections with glassmorphism style
- [x] **Candidate Cards** - Selection UI with image, name, slogan, rank
- [x] **ConfirmModal Component** - Reusable modal with backdrop animation

### Student Features

- [x] **Student Dashboard** - Show active elections, statistics
- [x] **Election Listing** - Filter by status (OPEN, CLOSED, PENDING)
- [x] **Election Details** - View positions and candidates
- [x] **Voting UI (Multi-Position)** - Select candidates for each position, support "No Vote"
- [x] **Vote Success Page** - Thank you page after voting
- [x] **Vote History Page** (`/me/votes`) - Show past votes (without revealing choices)
- [x] **Student Profile** - Display student info

### Admin Features

- [x] **Admin Dashboard** - Overview statistics, quick actions
- [x] **Election Management (CRUD)** - Create, Edit, Delete elections
- [x] **Election Control** - OPEN/CLOSE status buttons
- [x] **Position Management** - Enable/disable positions (president, secretary, etc.)
- [x] **Candidate Management (CRUD)** - Add, Edit, Delete candidates with image upload
- [x] **Student Management** - View all students, search, filter
- [x] **Voting Rights Approval** - Approve/Revoke voting rights
- [x] **Real-time Results Display** - Show vote counts with Bar Chart (Recharts)
- [x] **Results Table** - TanStack React Table with sorting, filtering
- [x] **Activity Log** - Display system activities
- [x] **Public Display Settings** - Configure what to show (raw score/winner only)

### Authentication

- [x] **Manual Registration** - Student ID + National ID lookup
- [x] **Login System** - localStorage-based authentication (Development)
- [x] **Session Management (POC)** - Server-side sessions in MySQL
- [x] **Role-based Access** - STUDENT vs ADMIN routes

### Database & Backend (POC)

- [x] **MySQL Schema Design** - 12 tables (students, elections, positions, candidates, votes, vote_history, sessions, admins, admin_sessions, activities, public_display_settings, position_display_configs)
- [x] **Database Connection Pool** - mysql2/promise with TypeScript types
- [x] **Server Actions (POC)** - loginAction, castVoteAction, getCurrentSession
- [x] **Transaction Support** - Anonymous voting implementation
- [x] **POC Testing** - Login and Voting flow tested successfully

### OCR System (Prototype)

- [x] **Card Detection Algorithm** - Canny Edge + Hough Line Transform
- [x] **Perspective Warp** - OpenCV.js warpPerspective
- [x] **Image Enhancement** - Sharpening, Contrast, Adaptive Threshold
- [x] **Text Recognition** - Tesseract.js (Thai + English)
- [x] **Text Parsing** - Extract Student ID, Name, Classroom, National ID
- [x] **Data Validation** - Match against student database
- [x] **Debug Tools** - Hough Line Visualizer, OCR Testing Pages

### Documentation

- [x] **README.md** - Comprehensive project documentation
- [x] **CLAUDE.md** - Instructions for Claude Code
- [x] **OCR System Architecture** - docs/architech/OCR_System_Flow.md
- [x] **Animation Best Practices** - docs/practices/ANIMATION_AND_MODAL_BEST_PRACTICES.md
- [x] **MySQL Migration Guide** - (completed, app/poc/ removed)

---

## üöß ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Deploy (Pending Deployment)

### Database Migration (Completed)

- [x] **Migrate from localStorage to MySQL** - All localStorage stores removed, fully using Server Actions
  - [x] POC implementation (completed, app/poc/ removed)
  - [x] Server Actions tested
  - [x] Replace useAuth hook with session-based auth
  - [x] Migrate all pages to use Server Actions
  - [x] Remove localStorage dependencies

### Deployment Preparation

- [~] **Environment Configuration**
  - [x] .env.local created
  - [ ] Production environment variables setup
  - [ ] Database credentials configuration

---

## üìù ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏° Deploy (To Do)

### Priority 1: Critical for Production

#### Backend Integration

- [x] **Replace localStorage with MySQL** (High Priority)
  - [x] Create `lib/db.ts` (copy from app/poc/lib/db.ts)
  - [x] Migrate `hooks/useAuth.ts` to session-based auth (`lib/actions/auth.ts`)
  - [x] Update all pages to use Server Actions
  - [x] Remove mock data dependencies (localStorage stores deleted)

- [ ] **API Routes Implementation**
  - [ ] POST `/api/auth/register` - Student registration
  - [ ] POST `/api/auth/login` - Login endpoint
  - [ ] POST `/api/auth/logout` - Logout endpoint
  - [ ] GET `/api/elections` - List elections
  - [ ] POST `/api/vote` - Cast vote (or keep Server Action)
  - [ ] GET `/api/results/:id` - Get results

- [ ] **Session Cleanup Cron Job**
  - [ ] Create scheduled task to delete expired sessions
  - [ ] Implement in deployment server (cron or systemd timer)

#### Security Enhancements

- [x] **Input Validation**
  - [x] Validate Student ID format (4 digits)
  - [x] Validate National ID format (13 digits)
  - [x] Sanitize all user inputs

- [ ] **Rate Limiting**
  - [ ] Login attempt rate limiting (max 5 attempts per 15 min)
  - [ ] Voting endpoint rate limiting
  - [ ] Admin action rate limiting

- [ ] **CSRF Protection**
  - [ ] Implement CSRF tokens for forms
  - [ ] Validate tokens on submissions

- [ ] **Environment Variables Security**
  - [ ] Move all secrets to .env
  - [ ] Ensure .env is in .gitignore
  - [ ] Document required env variables

#### Data Population

- [ ] **Import Real Student Data**
  - [ ] Prepare CSV/Excel with student data
  - [ ] Create import script (SQL INSERT statements)
  - [ ] Import into MySQL database
  - [ ] Verify data integrity

- [ ] **Create Default Admin Account**
  - [ ] Hash admin password with bcrypt
  - [ ] Insert into admins table
  - [ ] Document admin credentials securely

---

### Priority 2: Important for User Experience

#### Features

- [ ] **Email Notifications** (if required)
  - [ ] Setup SMTP configuration
  - [ ] Welcome email on registration
  - [ ] Voting confirmation email (with token)
  - [ ] Admin notification on new registration

- [ ] **Image Upload for Candidates**
  - [ ] Implement image upload endpoint
  - [ ] Store images in /public/candidates/ or cloud storage
  - [ ] Image optimization (resize, compress)
  - [ ] Drag & drop UI enhancement

- [ ] **Data Export Features**
  - [ ] Export results to CSV
  - [ ] Export results to Excel
  - [ ] Export vote history to PDF
  - [ ] Export student list to CSV

- [ ] **Search & Filter Enhancements**
  - [ ] Advanced search in student management
  - [ ] Filter by class, voting status
  - [ ] Sort by name, class, date

#### Testing

- [ ] **End-to-End Testing**
  - [ ] Test student registration flow
  - [ ] Test voting flow (all scenarios)
  - [ ] Test admin CRUD operations
  - [ ] Test edge cases (duplicate votes, expired sessions)

- [ ] **Browser Compatibility Testing**
  - [ ] Test on Chrome
  - [ ] Test on Firefox
  - [ ] Test on Safari
  - [ ] Test on Edge
  - [ ] Test on mobile browsers

- [ ] **Load Testing**
  - [ ] Simulate 100+ concurrent voters
  - [ ] Test database connection pool limits
  - [ ] Optimize slow queries

---

### Priority 3: Deployment

#### Server Setup

- [ ] **MySQL Server Configuration**
  - [ ] Install MySQL on school server
  - [ ] Create database and user
  - [ ] Import schema.sql
  - [ ] Configure remote access (if needed)

- [ ] **Next.js Production Build**
  - [ ] Run `npm run build`
  - [ ] Fix any build errors
  - [ ] Test production build locally (`npm start`)

- [ ] **Apache Reverse Proxy Setup**
  - [ ] Configure VirtualHost
  - [ ] Setup ProxyPass to localhost:3000
  - [ ] Enable required Apache modules (proxy, proxy_http)
  - [ ] Configure SSL certificate (if using HTTPS)

- [ ] **Process Manager**
  - [ ] Install PM2 or systemd service
  - [ ] Configure auto-restart on crash
  - [ ] Configure auto-start on server boot

#### Monitoring & Maintenance

- [ ] **Logging Setup**
  - [ ] Configure application logs
  - [ ] Setup error tracking (Sentry or similar)
  - [ ] Database query logging (for optimization)

- [ ] **Backup Strategy**
  - [ ] Setup automated MySQL backups (daily)
  - [ ] Backup uploaded images
  - [ ] Test restore procedures

- [ ] **Performance Monitoring**
  - [ ] Monitor server resources (CPU, RAM, Disk)
  - [ ] Monitor database query performance
  - [ ] Monitor response times

---

## üîÆ Future Features (‡πÅ‡∏ú‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)

### OCR Integration

- [ ] **Move OCR to Production**
  - [ ] Improve detection accuracy (>80%)
  - [ ] Server-side OCR processing (Python + OpenCV)
  - [ ] Custom ML model for Thai Student ID cards
  - [ ] Integration with registration flow

### Enhanced Features

- [ ] **Multi-language Support**
  - [ ] English translation
  - [ ] Language switcher

- [ ] **Vote Token System**
  - [ ] Generate unique tokens after voting
  - [ ] Email token to students
  - [ ] Token verification page

- [ ] **Advanced Analytics**
  - [ ] Voter turnout by class
  - [ ] Demographic analysis
  - [ ] Real-time voting trends dashboard

- [ ] **Notification System**
  - [ ] In-app notifications
  - [ ] Push notifications (PWA)
  - [ ] SMS notifications (via SMS gateway)

### Technical Improvements

- [ ] **Unit & Integration Tests**
  - [ ] Jest setup
  - [ ] Test Server Actions
  - [ ] Test React Components
  - [ ] Test database queries

- [ ] **API Documentation**
  - [ ] Swagger/OpenAPI documentation
  - [ ] API versioning strategy

- [ ] **Progressive Web App (PWA)**
  - [ ] Service Worker
  - [ ] Offline support
  - [ ] Install prompt

---

## üìä Deployment Readiness Checklist

### Pre-deployment Checklist

- [x] All localStorage code replaced with MySQL
- [ ] Real student data imported
- [ ] Admin account created
- [ ] Environment variables configured
- [ ] Security measures implemented
- [x] Production build tested
- [ ] Database backups configured
- [ ] Apache reverse proxy configured
- [ ] SSL certificate installed (if applicable)
- [ ] Process manager configured (PM2/systemd)

### Post-deployment Checklist

- [ ] Test all user flows on production server
- [ ] Verify database connections
- [ ] Check logs for errors
- [ ] Monitor server resources
- [ ] Train teachers/admins on system usage
- [ ] Prepare user guide/manual
- [ ] Setup support channel (for issues)

---

## üìû Support & Maintenance

### ‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (System Maintenance)

1. **Daily:**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
   - Monitor server resources

2. **Weekly:**
   - Backup database
   - Review activity logs
   - Check disk space

3. **Monthly:**
   - Update dependencies (security patches)
   - Performance optimization
   - User feedback review

4. **Per Election:**
   - Test voting flow before opening
   - Monitor real-time during voting period
   - Backup results after closing
   - Generate reports

---

## üéØ Success Metrics

‡πÄ‡∏°‡∏∑‡πà‡∏≠ Deploy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:

- ‚úÖ Voter Turnout > 80% (‡∏ú‡∏π‡πâ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 80%)
- ‚úÖ System Uptime > 99.9% (‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏´‡∏ß‡∏ï)
- ‚úÖ Zero Data Loss (‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á)
- ‚úÖ Average Response Time < 1s (‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- ‚úÖ Zero Duplicate Votes (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ã‡πâ‡∏≥)
- ‚úÖ User Satisfaction > 4/5 (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 4 ‡∏à‡∏≤‡∏Å 5)
